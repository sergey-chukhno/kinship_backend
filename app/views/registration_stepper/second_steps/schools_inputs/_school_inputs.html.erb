<div class="form__wrapper" data-controller="school-registration-form">
  <%= school_fields.input :school_id,
            label: t("registration.second_step.schools.school.label.#{@user_profile.role}"),
            hint: t("registration.second_step.schools.school.hint.#{@user_profile.role}"),
            collection: School.confirmed.first(20).map { |school| [school.full_name, school.id] },
            input_html: {
              name: "registration_stepper_user_profile[user_schools_attributes][#{id}][school_id]",
              data: {
                school_registration_form_target: "schoolInput",
              }
            } %>
  <% unless @user_profile.role == "teacher" || @user_profile.role == "voluntary" %>
    <%= f.input :school_level_ids,
            collection: [],
            label:t("registration.second_step.schools.school_level.label.#{@user_profile.role}"),
            input_html: {
              multiple: true,
              name: "registration_stepper_user_profile[school_level_ids][]",
              data: {
                school_registration_form_target: "schoolLevelInput",
              }
            } %>
    <div data-controller="reveal" class="form__wrapper">
      <label class="check-box xs-paragraph grey-01" data-action="change->reveal#toggle">
        <input type="checkbox">
        <span><%= t("registration.second_step.schools.dont_find_school_level") %></span>
      </label>
      <div data-reveal-target="item" class="form__wrapper hidden">
        <div class="form__wrapper" data-controller="nested-form" data-nested-form-wrapper-selector-value='.nested-fields-container'>
          <div class="hidden" data-nested-form-target="template">
            <%= simple_fields_for :create_school_level do |create_school_level_fields| %>
              <%= render "registration_stepper/second_steps/schools_inputs/create_school_level_input", create_school_level_fields: create_school_level_fields, id: "NEW_RECORD" %>
            <% end %>
          </div>
          <%= simple_fields_for :create_school_level do |create_school_level_fields| %>
            <%= render "registration_stepper/second_steps/schools_inputs/create_school_level_input", create_school_level_fields: create_school_level_fields, id: "0" %>
          <% end %>
          <button class="nested-fields--add-link" data-action="nested-form#add" data-nested-form-target="target"><%= show_svg "add.svg" %><%= t("registration.second_step.schools.create_school_level.new.button") %></button>
        </div>
        <%= simple_fields_for :create_custom_school_level do |create_custom_school_level_fields| %>
          <%= render "registration_stepper/second_steps/schools_inputs/create_custom_school_level_input", create_custom_school_level_fields: create_custom_school_level_fields %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
