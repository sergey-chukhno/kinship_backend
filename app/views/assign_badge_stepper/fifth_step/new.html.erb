<%= turbo_frame_tag "new-modal" do %>
  <%= render(Ui::Modal::Header::HeaderComponent.new(title: t(".title"), back_link: new_assign_badge_stepper_fourth_step_path)) %>

  <div class="stepper-container mb-0">
    <div class="stepper completed">
      <span class="bubble">
        <%= render(Ui::Icon::IconComponent.new(icon: "new/check", size: "16", color: "white")) %>
      </span>
    </div>

    <div class="stepper completed">
      <span class="bubble">
        <%= render(Ui::Icon::IconComponent.new(icon: "new/check", size: "16", color: "white")) %>
      </span>
    </div>

    <div class="stepper completed">
      <span class="bubble">
        <%= render(Ui::Icon::IconComponent.new(icon: "new/check", size: "16", color: "white")) %>
      </span>
    </div>

    <div class="stepper current">
      <span class="bubble">
        <%= render(Ui::Icon::IconComponent.new(icon: "new/check", size: "16", color: "white")) %>
      </span>
    </div>
  </div>

  <p class="s-paragraph grey-01 mb-16px"><%= raw t(".description") %></p>

  <%= simple_form_for @assign_badge, url: assign_badge_stepper_fifth_step_index_path, method: :post do |f| %>
    <%= f.input :receiver_id, as: :hidden %>
    <%= f.input :sender_id, as: :hidden %>
    <%= f.input :organization_id, as: :hidden %>
    <%= f.input :organization_type, as: :hidden %>
    <%= f.input :project_id, as: :hidden %>
    <%= f.input :badge_id, as: :hidden %>
    <%= f.simple_fields_for :user_badge_skills do |badge_skills_form| %>
      <%= badge_skills_form.input :badge_skill_id, as: :hidden %>
    <% end %>

    <%= f.input :project_title, label: t("activemodel.attributes.assign_badge_stepper/fifth_step.project_title") %>
    <%= f.input :project_description, as: :text, label: t("activemodel.attributes.assign_badge_stepper/fifth_step.project_description") %>
    <%= f.input :comment, as: :text, label: "Ajouter un commentaire positif" %>

    <div class="form__input-wrapper">
      <label class="xs-paragraph grey-01"><%= t("activemodel.attributes.assign_badge_stepper/fifth_step.documents.label") %></label>
      <div class="dropzone dropzone-default dz-clickable"
      data-controller="file-uploader"
      data-file-uploader-max-files="3"
      data-file-uploader-max-file-size="10"
      data-file-uploader-upload-multiple="true"
      data-file-uploader-add-remove-links="true">
        <%= f.input :documents,
                as: :file,
                label: false,
                input_html: {
                  multiple: true,
                  direct_upload: true,
                  data: {
                    "file-uploader-target": "input"
                  }
                } %>
        <div class="dropzone-msg dz-message needsclick">
          <%= show_svg "add_document.svg" %>
          <span class="s-paragraph grey-03">Glisser d√©poser ou cliquer ici pour ajouter un document</span>
        </div>
      </div>
    </div>

    <%= f.submit t('.actions.submit'), class: "button button--primary button--md button--full" %>
  <% end %>
<% end %>
